{"version":3,"sources":["../../../../lib/support-actions.ts","../../../../.next-internal/server/app/admin/support/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["\"use server\";\r\n\r\nimport { supabase } from \"./supabase\";\r\n\r\n// Get all support tickets (admin)\r\nexport async function getAllSupportTickets() {\r\n    const { data, error } = await supabase\r\n        .from(\"support_tickets\")\r\n        .select(\"*, users(name, email, reg_no)\")\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n    if (error) throw error;\r\n    return data;\r\n}\r\n\r\n// Get user's support tickets\r\nexport async function getUserSupportTickets(userId: string) {\r\n    const { data, error } = await supabase\r\n        .from(\"support_tickets\")\r\n        .select(\"*\")\r\n        .eq(\"user_id\", userId)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n    if (error) throw error;\r\n    return data;\r\n}\r\n\r\n// Respond to support ticket (admin)\r\nexport async function respondToSupportTicket(ticketId: string, response: string, status: 'OPEN' | 'RESOLVED') {\r\n    const { error } = await supabase\r\n        .from(\"support_tickets\")\r\n        .update({ admin_response: response, status })\r\n        .eq(\"id\", ticketId);\r\n\r\n    if (error) throw error;\r\n    return true;\r\n}\r\n\r\n// Submit a new ticket (user)\r\nexport async function submitSupportTicket(ticketData: {\r\n    user_id: string;\r\n    issue_type: string;\r\n    description: string;\r\n}) {\r\n    const { data, error } = await supabase\r\n        .from(\"support_tickets\")\r\n        .insert([ticketData])\r\n        .select()\r\n        .single();\r\n\r\n    if (error) throw error;\r\n    return data;\r\n}\r\n","export {getAllSupportTickets as '0045fb994f6a9e3b4f8f97db2d30794be6f756fec9'} from 'ACTIONS_MODULE0'\nexport {respondToSupportTicket as '706fbe92ac19e57bdd6ff1dd9499f94ac059340643'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OAGO,eAAe,IAClB,GAAM,MAAE,CAAI,CAAE,OAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACjC,IAAI,CAAC,mBACL,MAAM,CAAC,iCACP,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAE5C,GAAI,EAAO,MAAM,EACjB,OAAO,CACX,CAGO,eAAe,EAAsB,CAAc,EACtD,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACjC,IAAI,CAAC,mBACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAW,GACd,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAE5C,GAAI,EAAO,MAAM,EACjB,OAAO,CACX,CAGO,eAAe,EAAuB,CAAgB,CAAE,CAAgB,CAAE,CAA2B,EACxG,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CAC3B,IAAI,CAAC,mBACL,MAAM,CAAC,CAAE,eAAgB,SAAU,CAAO,GAC1C,EAAE,CAAC,KAAM,GAEd,GAAI,EAAO,MAAM,EACjB,OAAO,CACX,CAGO,eAAe,EAAoB,CAIzC,EACG,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAA,QAAQ,CACjC,IAAI,CAAC,mBACL,MAAM,CAAC,CAAC,EAAW,EACnB,MAAM,GACN,MAAM,GAEX,GAAI,EAAO,MAAM,EACjB,OAAO,CACX,0CA/CsB,EAWA,EAYA,EAWA,IAlCA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAWA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAYA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,MAWA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,2JCvCtB,IAAA,EAAA,EAAA,CAAA,CAAA"}