module.exports=[210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},41710,a=>{"use strict";let b=(0,a.i(70106).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],41710)},45222,a=>{"use strict";let b=(0,a.i(70106).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);a.s(["MessageCircle",()=>b],45222)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},92759,a=>{"use strict";let b=(0,a.i(70106).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],92759)},58483,a=>{"use strict";var b=a.i(5050),c=(0,b.createServerReference)("40bd76bae8ee6abac23d4a4fbef5630d6324698511",b.callServer,void 0,b.findSourceMapURL,"getUserSupportTickets");a.s(["getUserSupportTickets",()=>c])},30654,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78560),f=a.i(5050),g=(0,f.createServerReference)("701fba58dcf8d9125f8abefc12d3b97ddf8184b8cf",f.callServer,void 0,f.findSourceMapURL,"createTicket"),h=a.i(58483),i=a.i(96221),j=a.i(45222),k=a.i(92759),l=a.i(16201),m=a.i(41710),n=a.i(210),o=a.i(46271),p=a.i(3597);function q(){let[a,f]=(0,c.useState)(null),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)("PAYMENT"),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)({name:"",email:"",reg_no:""}),G=(0,d.useRouter)();(0,c.useEffect)(()=>{H()},[]);let H=async()=>{let a=document.cookie.split(";").reduce((a,b)=>{let[c,d]=b.trim().split("=");return a[c]=d,a},{}).student_session;try{if(a){let{data:b,error:c}=await e.supabase.from("users").select("*").eq("id",a).single();if(!c){f(b);let c=await (0,h.getUserSupportTickets)(a);r(c||[])}}}catch(a){}finally{t(!1)}},I=async b=>{if(b.preventDefault(),!a&&(!E.name||!E.email))return void B("Please provide your name and email so we can reach you.");if(!y.trim())return void B("Please describe your issue");try{v(!0),B(null);let b=a?y:`[GUEST: ${E.name} | ${E.email} | ${E.reg_no}]

${y}`;await g(a?.id||null,w,b),D(!0),z(""),F({name:"",email:"",reg_no:""}),setTimeout(()=>D(!1),3e3),await H()}catch(a){B((0,p.getFriendlyError)(a))}finally{v(!1)}};return s?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)(i.Loader2,{className:"w-8 h-8 text-cyan-500 animate-spin"})}):(0,b.jsx)("div",{className:"min-h-screen bg-black text-white",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("button",{onClick:()=>G.push("/dashboard"),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors mb-4",children:[(0,b.jsx)(n.ArrowLeft,{className:"w-4 h-4"}),"Back to Dashboard"]}),(0,b.jsx)("h1",{className:"text-4xl font-black uppercase tracking-tighter",children:"Support Center"}),(0,b.jsx)("p",{className:"text-white/60 mt-2",children:"Need help? Submit a ticket and our team will assist you."})]}),(0,b.jsxs)("div",{className:"glass-card p-6 mb-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,b.jsx)(j.MessageCircle,{className:"w-5 h-5 text-cyan-400"}),a?"Submit New Ticket":"Guest Support / Account Recovery"]}),(0,b.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[!a&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Your Name"}),(0,b.jsx)("input",{type:"text",value:E.name,onChange:a=>F({...E,name:a.target.value}),placeholder:"Enter your full name",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Email Address"}),(0,b.jsx)("input",{type:"email",value:E.email,onChange:a=>F({...E,email:a.target.value}),placeholder:"Email where we can reach you",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Registration Number (If known)"}),(0,b.jsx)("input",{type:"text",value:E.reg_no,onChange:a=>F({...E,reg_no:a.target.value}),placeholder:"Helps us find your account faster",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Issue Type"}),(0,b.jsxs)("select",{value:w,onChange:a=>x(a.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors",children:[(0,b.jsx)("option",{value:"PAYMENT",children:"Payment Issue"}),(0,b.jsx)("option",{value:"REGISTRATION",children:"Registration Issue"}),(0,b.jsx)("option",{value:"TEAM",children:"Team Management"}),(0,b.jsx)("option",{value:"TECHNICAL",children:"Technical Problem"}),(0,b.jsx)("option",{value:"OTHER",children:"Other"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Description"}),(0,b.jsx)("textarea",{value:y,onChange:a=>z(a.target.value),placeholder:"Describe your issue in detail...",rows:5,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors resize-none"})]}),A&&(0,b.jsx)("div",{className:"p-4 bg-red-500/20 border border-red-500/50 rounded-xl text-red-500 text-sm",children:A}),C&&(0,b.jsxs)(o.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-500/20 border border-green-500/50 rounded-xl text-green-500 text-sm flex items-center gap-2",children:[(0,b.jsx)(l.CheckCircle,{className:"w-5 h-5"}),"Ticket submitted successfully! We'll respond soon."]}),(0,b.jsxs)("button",{type:"submit",disabled:u,className:"w-full px-6 py-3 bg-cyan-500 text-black rounded-xl hover:bg-cyan-400 transition-all font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:[u?(0,b.jsx)(i.Loader2,{className:"w-5 h-5 animate-spin"}):(0,b.jsx)(k.Send,{className:"w-5 h-5"}),u?"Submitting...":"Submit Ticket"]})]})]}),(0,b.jsxs)("div",{className:"glass-card p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Your Tickets (",q.length,")"]}),0===q.length?(0,b.jsxs)("div",{className:"text-center py-12 text-white/40",children:[(0,b.jsx)(j.MessageCircle,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),(0,b.jsx)("p",{children:"No tickets submitted yet"})]}):(0,b.jsx)("div",{className:"space-y-4",children:q.map(a=>(0,b.jsxs)("div",{className:"p-4 bg-white/5 rounded-xl border border-white/10",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:"px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-full text-xs font-bold uppercase",children:a.issue_type}),(0,b.jsxs)("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${"RESOLVED"===a.status?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"}`,children:["RESOLVED"===a.status?(0,b.jsx)(l.CheckCircle,{className:"w-3 h-3 inline mr-1"}):(0,b.jsx)(m.Clock,{className:"w-3 h-3 inline mr-1"}),a.status]})]}),(0,b.jsx)("p",{className:"text-xs text-white/40",children:new Date(a.created_at).toLocaleString()})]})}),(0,b.jsx)("p",{className:"text-sm text-white/80 mb-3",children:a.description}),a.admin_response&&(0,b.jsxs)("div",{className:"mt-3 p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs font-bold text-purple-400 mb-1",children:"Admin Response:"}),(0,b.jsx)("p",{className:"text-sm text-white/90",children:a.admin_response})]})]},a.id))})]})]})})}a.s(["default",()=>q],30654)}];

//# sourceMappingURL=_787f620b._.js.map