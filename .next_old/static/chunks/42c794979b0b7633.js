(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},95187,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={callServer:function(){return l.callServer},createServerReference:function(){return c.createServerReference},findSourceMapURL:function(){return i.findSourceMapURL}};for(var r in a)Object.defineProperty(s,r,{enumerable:!0,get:a[r]});let l=e.r(32120),i=e.r(92245),c=e.r(35326)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},94983,e=>{"use strict";let t=(0,e.i(75254).default)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);e.s(["MessageCircle",()=>t],94983)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},64777,e=>{"use strict";var t=e.i(95187),s=(0,t.createServerReference)("40bd76bae8ee6abac23d4a4fbef5630d6324698511",t.callServer,void 0,t.findSourceMapURL,"getUserSupportTickets");e.s(["getUserSupportTickets",()=>s])},96159,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(17927),l=e.i(95187),i=(0,l.createServerReference)("701fba58dcf8d9125f8abefc12d3b97ddf8184b8cf",l.callServer,void 0,l.findSourceMapURL,"createTicket"),c=e.i(64777),n=e.i(31278),o=e.i(94983),d=e.i(14764),u=e.i(69638),m=e.i(3116),x=e.i(71689),h=e.i(46932),p=e.i(94769);function b(){let[e,l]=(0,s.useState)(null),[b,f]=(0,s.useState)([]),[y,g]=(0,s.useState)(!0),[j,v]=(0,s.useState)(!1),[w,N]=(0,s.useState)("PAYMENT"),[k,S]=(0,s.useState)(""),[C,T]=(0,s.useState)(null),[R,M]=(0,s.useState)(!1),[L,E]=(0,s.useState)({name:"",email:"",reg_no:""}),A=(0,a.useRouter)();(0,s.useEffect)(()=>{_()},[]);let _=async()=>{let e=document.cookie.split(";").reduce((e,t)=>{let[s,a]=t.trim().split("=");return e[s]=a,e},{}).student_session;try{if(e){let{data:t,error:s}=await r.supabase.from("users").select("*").eq("id",e).single();if(!s){l(t);let s=await (0,c.getUserSupportTickets)(e);f(s||[])}}}catch(e){}finally{g(!1)}},P=async t=>{if(t.preventDefault(),!e&&(!L.name||!L.email))return void T("Please provide your name and email so we can reach you.");if(!k.trim())return void T("Please describe your issue");try{v(!0),T(null);let t=e?k:`[GUEST: ${L.name} | ${L.email} | ${L.reg_no}]

${k}`;await i(e?.id||null,w,t),M(!0),S(""),E({name:"",email:"",reg_no:""}),setTimeout(()=>M(!1),3e3),await _()}catch(e){T((0,p.getFriendlyError)(e))}finally{v(!1)}};return y?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(n.Loader2,{className:"w-8 h-8 text-cyan-500 animate-spin"})}):(0,t.jsx)("div",{className:"min-h-screen bg-black text-white",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("button",{onClick:()=>A.push("/dashboard"),className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors mb-4",children:[(0,t.jsx)(x.ArrowLeft,{className:"w-4 h-4"}),"Back to Dashboard"]}),(0,t.jsx)("h1",{className:"text-4xl font-black uppercase tracking-tighter",children:"Support Center"}),(0,t.jsx)("p",{className:"text-white/60 mt-2",children:"Need help? Submit a ticket and our team will assist you."})]}),(0,t.jsxs)("div",{className:"glass-card p-6 mb-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,t.jsx)(o.MessageCircle,{className:"w-5 h-5 text-cyan-400"}),e?"Submit New Ticket":"Guest Support / Account Recovery"]}),(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[!e&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Your Name"}),(0,t.jsx)("input",{type:"text",value:L.name,onChange:e=>E({...L,name:e.target.value}),placeholder:"Enter your full name",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Email Address"}),(0,t.jsx)("input",{type:"email",value:L.email,onChange:e=>E({...L,email:e.target.value}),placeholder:"Email where we can reach you",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Registration Number (If known)"}),(0,t.jsx)("input",{type:"text",value:L.reg_no,onChange:e=>E({...L,reg_no:e.target.value}),placeholder:"Helps us find your account faster",className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Issue Type"}),(0,t.jsxs)("select",{value:w,onChange:e=>N(e.target.value),className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors",children:[(0,t.jsx)("option",{value:"PAYMENT",children:"Payment Issue"}),(0,t.jsx)("option",{value:"REGISTRATION",children:"Registration Issue"}),(0,t.jsx)("option",{value:"TEAM",children:"Team Management"}),(0,t.jsx)("option",{value:"TECHNICAL",children:"Technical Problem"}),(0,t.jsx)("option",{value:"OTHER",children:"Other"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-2 text-white/80",children:"Description"}),(0,t.jsx)("textarea",{value:k,onChange:e=>S(e.target.value),placeholder:"Describe your issue in detail...",rows:5,className:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl focus:border-cyan-500 focus:outline-none transition-colors resize-none"})]}),C&&(0,t.jsx)("div",{className:"p-4 bg-red-500/20 border border-red-500/50 rounded-xl text-red-500 text-sm",children:C}),R&&(0,t.jsxs)(h.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-4 bg-green-500/20 border border-green-500/50 rounded-xl text-green-500 text-sm flex items-center gap-2",children:[(0,t.jsx)(u.CheckCircle,{className:"w-5 h-5"}),"Ticket submitted successfully! We'll respond soon."]}),(0,t.jsxs)("button",{type:"submit",disabled:j,className:"w-full px-6 py-3 bg-cyan-500 text-black rounded-xl hover:bg-cyan-400 transition-all font-bold flex items-center justify-center gap-2 disabled:opacity-50",children:[j?(0,t.jsx)(n.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(d.Send,{className:"w-5 h-5"}),j?"Submitting...":"Submit Ticket"]})]})]}),(0,t.jsxs)("div",{className:"glass-card p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Your Tickets (",b.length,")"]}),0===b.length?(0,t.jsxs)("div",{className:"text-center py-12 text-white/40",children:[(0,t.jsx)(o.MessageCircle,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),(0,t.jsx)("p",{children:"No tickets submitted yet"})]}):(0,t.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,t.jsxs)("div",{className:"p-4 bg-white/5 rounded-xl border border-white/10",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"px-3 py-1 bg-cyan-500/20 text-cyan-400 rounded-full text-xs font-bold uppercase",children:e.issue_type}),(0,t.jsxs)("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${"RESOLVED"===e.status?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"}`,children:["RESOLVED"===e.status?(0,t.jsx)(u.CheckCircle,{className:"w-3 h-3 inline mr-1"}):(0,t.jsx)(m.Clock,{className:"w-3 h-3 inline mr-1"}),e.status]})]}),(0,t.jsx)("p",{className:"text-xs text-white/40",children:new Date(e.created_at).toLocaleString()})]})}),(0,t.jsx)("p",{className:"text-sm text-white/80 mb-3",children:e.description}),e.admin_response&&(0,t.jsxs)("div",{className:"mt-3 p-3 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs font-bold text-purple-400 mb-1",children:"Admin Response:"}),(0,t.jsx)("p",{className:"text-sm text-white/90",children:e.admin_response})]})]},e.id))})]})]})})}e.s(["default",()=>b],96159)}]);